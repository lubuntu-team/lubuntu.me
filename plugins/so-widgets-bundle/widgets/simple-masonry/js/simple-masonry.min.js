var sowb=window.sowb||{};jQuery(function(t){sowb.setupSimpleMasonries=function(){var i=t(".sow-masonry-grid"),a=function(){i.each(function(){var i=t(this),a=i.data("layouts"),e=window.matchMedia("(max-width: "+a.tablet.breakPoint+"px)"),s=window.matchMedia("(max-width: "+a.mobile.breakPoint+"px)"),o=a.desktop;s.matches?o=a.mobile:e.matches&&(o=a.tablet);var n=o.numColumns;i.css("width","auto");var h=o.gutter*(n-1),r=Math.floor((i.width()-h)/n);i.width(r*n+h),i.imagesLoaded(function(){i.find("> .sow-masonry-grid-item").each(function(){var i=t(this),a=i.data("colSpan");a=Math.max(Math.min(a,o.numColumns),1),i.width(r*a+o.gutter*(a-1));var e=i.data("rowSpan");e=Math.max(Math.min(e,o.numColumns),1);var s=o.rowHeight||r;i.css("height",s*e+o.gutter*(e-1));var n=i.find("> img,> a > img"),h=n.attr("height")>0?n.attr("width")/n.attr("height"):1,w=i.height()>0?i.width()/i.height():1;if(h=parseFloat(h.toFixed(3)),w=parseFloat(w.toFixed(3)),h>w){n.css("width","auto"),n.css("height","100%"),n.css("margin-top","");var m=-.5*(n.width()-i.width());n.css("margin-left",m+"px")}else{n.css("height","auto"),n.css("width","100%"),n.css("margin-left","");var d=-.5*(n.height()-i.height());n.css("margin-top",d+"px")}}),i.packery({itemSelector:".sow-masonry-grid-item",columnWidth:r,gutter:o.gutter})})})};t(window).on("resize panelsStretchRows",a),setTimeout(function(){a()},100)},sowb.setupSimpleMasonries(),t(sowb).on("setup_widgets",sowb.setupSimpleMasonries)}),window.sowb=sowb;